_dep_install:
    _info:
        title: Check dependencies for this module.
    _env:
        - CMD: OS_DEP_INSTALL

info:
    _info:
        title: Show information about the OS.
    _env:
        - CMD: OS_INFO
harden:
    _info:
        title: Harden the machine.

userexist:
    _info:
        title: Check is a user exists.
    _env:
        - CMD: OS_USER_EXIST -- ${targetuser-}

installsudo:
    _info:
        title: Install the 'sudo' pkg.
    _env:
        - CMD: OS_INSTALL_PKG "sudo"

createuser:
    _info:
        title: Create a new user.
    _env:
        - targetuserpubkeyfile: ${targetuserpubkeyfile:-${SSHPUBKEYFILE-}}
        - CMD: OS_CREATE_USER -- ${targetuser-} ${targetuserpubkeyfile-}

mksudo:
    _info:
        title: Make an existing user into sudo.
    _env:
        - CMD: OS_MKSUDO_USER -- ${targetuser-}

disableroot:
    _info:
        title: Disable root login.
        desc: |
            Run this to make it so that the root user no longer can login
            over SSH. This hightens the security of the machine, but make sure
            the super user has been setup successfully first.
    _env:
        - CMD: OS_DISABLE_ROOT

disableuser:
    _info:
        title: Disable an user account.
        desc: |
            Disable a user from logging in.
    _env:
        - CMD: OS_DISABLE_USER -- ${targetuserdisable-}

motd:
    _info:
        title: Create/replace motd file.
    _env:
        - motdfile: ${motdfile:-@{DIR}/motd}
    _env:
        - CMD: OS_MOTD -- ${motdfile}

update:
    _info:
        title: Update the OS package lists.
    _env:
        - CMD: OS_UPDATE

reboot:
    _info:
        title: Reboot the system.
    _env:
        - CMD: OS_REBOOT

upgrade:
    _info:
        title: Update and upgrade OS.
    _env:
        - CMD: OS_UPGRADE

service:
    _info:
        title: Control a service.
    _env:
        - service: ${service-}
        - action: ${action-}
        - CMD: OS_SERVICE ${service-} ${action-}

shell:
    _info:
        title: Enter into shell
    _env:
        - shell: sh
        - CMD: OS_SHELL ${service-}

install:
    _info:
        title: Install any pkg.
        desc: |
            Pkg name as positional argument.
            Always provide Debian names.
    _env:
        - pkg: ${pkg-}
        - CMD: OS_INSTALL_PKG ${pkg-}
